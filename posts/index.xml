<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Posts on rohanrd.xyz</title>
    <link>https://rohanrd.xyz/posts/</link>
    <description>Recent content in Posts on rohanrd.xyz</description>
    <generator>Hugo -- 0.125.1</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 15 Aug 2024 02:49:22 +0530</lastBuildDate>
    <atom:link href="https://rohanrd.xyz/posts/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Why RSS</title>
      <link>https://rohanrd.xyz/posts/why-rss/</link>
      <pubDate>Thu, 15 Aug 2024 02:49:22 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/why-rss/</guid>
      <description>Gone are the days when you could just find a random blog on Internet where someone wrote about tinkering with their home lab or someone shared about the obscure art they know. Today&amp;rsquo;s web is highly curated and everything is filtered out to show you the content that would generate most revenue. Search engines are filled with optimized results that can easily be categorized as spam. And social media is filled with highly polished, attractive content that may not add any value at all to an individuals life.</description>
      <content:encoded><![CDATA[<p>Gone are the days when you could just find a random blog on Internet where someone wrote about tinkering with their home lab or someone shared about the obscure art they know. Today&rsquo;s web is highly curated and everything is filtered out to show you the content that would generate most revenue. Search engines are filled with optimized results that can easily be categorized as spam. And social media is filled with highly polished, attractive content that may not add any value at all to an individuals life.</p>
<p>I blame Ads. The web has become increasingly hostile place because of ads. Huge corporations are pouring billions to grab eyeballs on the web. The ads are becoming intrusive and there are third party trackers everywhere. Trackers that track your interests and show you ads depending on that.  Using web without an adblocker is a nightmare. Now it&rsquo;s getting difficult to block ads[1] as well. Then there&rsquo;s case of AI generated content which is only going to increase and it will become increasingly difficult to discern from real content.</p>
<h2 id="ditch-the-feed">Ditch The Feed</h2>
<p>I mostly hang out on Hacker News and Reddit. I don&rsquo;t have any other social media and I have found myself worrying about global politics, climate change, microplastics and whole lot of other things. Things that I have no control over. Don&rsquo;t get me wrong it&rsquo;s good to be informed about these things but constant influx of such information is not helping anyone. It&rsquo;s critical to regulate what we consume on web because our brains have a tendency to think about what we consume. Our very thoughts could be the result of what information we are consuming. Seriously ditch the feed that someone else is curating for you! [2]</p>
<h2 id="curate-your-own">Curate Your Own</h2>
<p>After all issues above one might want to ditch all the social media and web along with it but we all know that&rsquo;s not possible. The best we can do is limit the influx of information and curate it such that it&rsquo;s good for our well being. Find people and organizations you can trust. There are bloggers and content creators who know their craft and audience. These are the once who prefer authenticity over anything else. You will never see AI generated content from these. You can also trust their content. Subscribe to such people and organizations. Add them to your feed or remove them if they aren&rsquo;t adding any value to your life. Curate your own feed religiously.</p>
<p>But how?  Enters RSS.</p>
<h2 id="introdution-to-rss">Introdution to RSS</h2>
<p>It&rsquo;s like a social media feed but you are the curator. You choose sources that will appear in your feed and not some algorithm which is prioritizing revenue of some corporation over your interests. There are no trackers or intrusive ads in RSS. You can configure how frequently you want to refresh the feed. You choose the application to browse the feed. Unlike web where you only have Chrome or Firefox for browsing, RSS feeds can be read on any of 1000s of clients available. Choose one that suits you I will recommend <a href="https://github.com/prof18/feed-flow">Feed flow</a>. You can even use browser to read your feed. I am using miniflux and this is how my feed looks like:</p>
<p><img loading="lazy" src="/static/miniflux.png" alt="RSS feed curated with miniflux"  />
</p>
<p>A Word of Advice: limit the number of sources and frequency of refresh. That way you will have the best possible experience browsing the web. Once you become accustomed to RSS you can configure it to consume everything from blogs to YouTube videos and even podcasts. Your RSS feed should be a place where you can find information that you are interested in. Unlike social media, RSS feed will get boring fast and hence non addictive. You will spend less time on web and more time with yourself.</p>
<p>One more thing, sometimes websites do not provide RSS feed and in that case there&rsquo;s nothing we can do except request them to provide one. But such sites are limited and most websites will provide RSS feed. Just look for icon below. You can copy URL of image and paste it into your feed to subscribe to this blogs RSS feed!</p>
<p><a href="https://rohanrd.xyz/index.xml"><img loading="lazy" src="/static/rss.svg" alt=""  />
</a></p>
<p>Notes:</p>
<ol>
<li><a href="https://www.androidpolice.com/google-chrome-manifest-v2-extensions-warning/">Google Chrome has started warning users that their ad blockers may soon be disabled</a></li>
<li>As much as I had like to avoid entire social media it still has some value so I have limited Reddit and Hacker news to once a week. It&rsquo;s still new so I will see how it goes.</li>
</ol>
]]></content:encoded>
    </item>
    <item>
      <title>Goodbye Google. Hello Ecosia!</title>
      <link>https://rohanrd.xyz/posts/goodbye-google.-hello-ecosia/</link>
      <pubDate>Sun, 16 Jun 2024 01:57:39 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/goodbye-google.-hello-ecosia/</guid>
      <description>So long Google There was a time I thought I would never switch away from Google. But times change, things fall apart. An incredible search engine starts giving you answers for the questions you never asked. A search engines job is to find best results for given keywords and then allow the user to navigate away from them. With Google, they are choosing the result for me. They are showing way too much information that I&amp;rsquo;m not really looking for.</description>
      <content:encoded><![CDATA[<h3 id="so-long-google">So long Google</h3>
<p>There was a time I thought I would never switch away from Google. But times change, things fall apart. An incredible search engine starts giving you answers for the questions you never asked. A search engines job is to find best results for given keywords and then allow the user to navigate away from them. With Google, they are choosing the result for me. They are showing way too much information that I&rsquo;m not really looking for. Try searching for a city and you will know what I&rsquo;m talking about.</p>
<p>They are tuning search such that it becomes more accessible to people who like asking questions and getting answers. There&rsquo;s nothing wrong with this. The sweet analytics that they collect must have been telling them that large number of people like to ask questions and are expecting answers. So that&rsquo;s the direction they have chosen for search. This is normal progression of any Software when they choose to follow analytics. Of course with their popularity they could have chosen to ignore analytics and make search better. Everyone would eventually learn the art of searching but that&rsquo;s just my idealism.</p>
<p>I prefer good old searching with keywords instead of asking questions. When I&rsquo;m typing those keywords I want the search engine to find all the pages across the web that might have those keywords. Google still does that but there focus has shifted from returning best results to keeping users engaged on the search page. AI generated answers are now front and center. Then there&rsquo;s that annoying questions panel that keeps expanding with more questions if you click one of the answers. Search results are below all these panels. This shows their priorities. Instead of all this AI fluff they could have chosen to solve the SEO spam issue but no.</p>
<p>Anyways, my search experience has siginificantly deviated from what it was few years ago. I don&rsquo;t think they can ever go back on this. New and existing users now expect everything that they have been doing on search page. People like me who prefer the good old search will just have to find new search engine.</p>
<h3 id="hello-ecosia">Hello Ecosia</h3>
<p>I found out about Ecosia from a comment on Hacker News. It stated that the search engine plants trees when you search. My first thought was that must be some poor search engine which plants trees just to create headlines. But I was wrong. Few days later, I was annoyed with Google and decided to try Ecosia. It&rsquo;s been a long time that I used a search engine other than Google and I was not disappointed with the results. The best way to try out a search engine is to change your deafult search in your browser and use it for few days. I have been using Ecosia for a month now and I&rsquo;m happy to say that I love it. I don&rsquo;t see myself switching back to Google.</p>
<p>The search engine is clean. It does not have any dynamic panels that expand at will. Search results are front and center and AI is hidden away in separate tab. They do show occasional information panels like currency converter or the dictionary panel but these panels are limited and are useful when shown. Searching on Ecosia reminds you of old days of Google. You can&rsquo;t sign in to Ecosia. They don&rsquo;t store any history and is good from user privacy perspective. You can disable the cookies you don&rsquo;t need from their settings page.</p>
<p>With Ecosia it&rsquo;s not just better search experience, 100% of their profits go to climate action. They really do plant trees when we are searching! All the information regarding their financials is easily accessible from homepage and they are very transparent about their spending. I actually disabled my adblocker for Ecosia. These ads help them make profits which finally go to climate action. It&rsquo;s refreshing to see a company using their profits for better tomorrow.</p>
<p>If you are excited to try it out, here you go: <a href="https://www.ecosia.org">https://www.ecosia.org</a></p>
<p>Subscribe to RSS feed for future updates!</p>
<hr>
<p>P.S.
If you are someone who prefers Google but don&rsquo;t like the new changes that are happening on results page then you can still get old results only page by using the &ldquo;Web&rdquo; filter from &ldquo;More&rdquo; dropdown. With this filter, Google will not show any AI answers or suggest any questions. I tried this for few days but the way this feature is hidden away shows Google&rsquo;s priorities.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Every Phone Should Be Able to Run Personal Website</title>
      <link>https://rohanrd.xyz/posts/every-phone-should-be-able-to-run-personal-website/</link>
      <pubDate>Sat, 05 Aug 2023 19:51:52 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/every-phone-should-be-able-to-run-personal-website/</guid>
      <description>Back in 2009, anynone with a Nokia could have a personal website running on their own phone. You could host your own blog or share photos directly from your camera roll. People could message you or even send you sms over HTTP. There was other functionality but you get the gist. Sadly this amazing piece of tech was never widely adopted. Today&amp;rsquo;s phones are far more powerful than those Nokias both in performance and battery backup and still we don&amp;rsquo;t see anyone running a server on their phone.</description>
      <content:encoded><![CDATA[<p>Back in 2009, anynone with a Nokia could have a personal website running on their own phone. You could host your own blog or share photos directly from your camera roll. People could message you or even send you sms over HTTP. There was other functionality but you get the gist. Sadly this amazing piece of tech was never widely adopted. Today&rsquo;s phones are far more powerful than those Nokias both in performance and battery backup and still we don&rsquo;t see anyone running a server on their phone. Why?</p>
<p>I think this is because doing something like this that would make web more open was never a priority for large corporations.Think about it there&rsquo;s no incentive for them to work on something like this. In fact, it might be something they want to actively avoid in order for their walled gardens to flourish. Then there are some tech aspects too that need to be worked on. A large number of population is behind CG-NAT and hence can&rsquo;t use mobile server like this. Although this is changing with IPv6. Then there&rsquo;s Android&rsquo;s case of not allowing any application to bind below 1000 port. This prevents running web server on traditional 80 or 443 port.</p>
<p>Today&rsquo;s phone can definitely handle a small personal static website that has similar functionality like that of original
Nokia web server. The reason I think this is needed is because a large percent of Internet users cannot afford hosting personal
websites or have no idea how to. If we made setting up a website as easy as few clicks a lot of people would want to create their own websites.</p>
<p>Early Internet users had the privilege of self hosting from home, at that time there was no CG-NAT. Today&rsquo;s users never got to experience that possibility. Most of current population joined Internet when their devices were already behind CG-NAT. Maybe the next billion websites can come from average phone users but someone has to provide the software to do it easily. All we need is to package a server like caddy for Android/iOS and provide IPv6 connectivity.</p>
]]></content:encoded>
    </item>
    <item>
      <title>First Steps After Installing Raspbian</title>
      <link>https://rohanrd.xyz/posts/first-steps-after-installing-raspbian/</link>
      <pubDate>Sun, 19 Mar 2023 17:07:37 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/first-steps-after-installing-raspbian/</guid>
      <description>We discussed regarding the hardware that I use for self hosting here. Let&amp;rsquo;s prepare our Pi for selfhosting
Install Raspbian Downloads
Raspberry Pi Imager is the quick and easy way to install Raspberry Pi OS and other operating systems to a microSD card, ready to use with your Raspberry Pi Download Raspbian Lite. Choose 64 bit version Once you have downloaded these, start imager tool. Now choose &amp;ldquo;Use custom&amp;rdquo; option and specify the OS image location.</description>
      <content:encoded><![CDATA[<p>We discussed regarding the hardware that I use for self hosting <a href="https://rohanrd.xyz/posts/getting-started-with-self-hosting/">here</a>. Let&rsquo;s prepare our Pi for selfhosting</p>
<h2 id="install-raspbian">Install Raspbian</h2>
<p>Downloads</p>
<ol>
<li><a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a> is the quick and easy way to install Raspberry Pi OS and other operating systems to a microSD card, ready to use with your Raspberry Pi</li>
<li><a href="https://www.raspberrypi.com/software/operating-systems/">Download Raspbian Lite.</a> Choose 64 bit version</li>
</ol>
<p>Once you have downloaded these, start imager tool. Now choose &ldquo;Use custom&rdquo; option and specify the OS image location. Next you have to choose the storage option which will list the memory card that you will be inserting in Raspberry Pi. Once you have set these, select the gear icon to specify initial preferences for the OS. specify below options and check the set hostname box. You can also set the locale. I am assuming you will be using Ethernet connection. But if you want to use WiFi you should set those preferences as well.</p>
<p><img loading="lazy" src="/static/os-preferences.png" alt=""  />
</p>
<p>Write the image, it will take some time and will give a message when you can eject the memory card. You can now insert it in the memory card slot on your Pi. At this point you are ready to power on your Pi. Once it&rsquo;s powered on, use app like Wifiman on your phone to determine IP address of your Pi. You can log into the shell of your Pi using ssh</p>
<p><code>ssh pi@192.168.1.12</code></p>
<p>It will prompt you for the password that we set earlier. Your Pi is ready to self host but let&rsquo;s do some housekeeping before we install any applications.</p>
<h2 id="install-log2ram">Install Log2ram</h2>
<p>Log2ram is required because we don&rsquo;t want to write logs generated by our applications to the memory card. Instead we store those logs in RAM. This is mostly useful for preventing wear and tear of our SD card. Run below commands to install <code>log2ram</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#a2f">echo</span> <span style="color:#b44">&#34;deb [signed-by=/usr/share/keyrings/azlux-archive-keyring.gpg] http://packages.azlux.fr/debian/ bookworm main&#34;</span> | sudo tee /etc/apt/sources.list.d/azlux.list
</span></span><span style="display:flex;"><span>sudo wget -O /usr/share/keyrings/azlux-archive-keyring.gpg  https://azlux.fr/repo.gpg
</span></span><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>sudo apt install log2ram
</span></span></code></pre></div><p>After installation you need to reboot. You can check if it&rsquo;s working by checking log2ram service status or by running below command</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo df -h | grep log2ram
</span></span></code></pre></div><p>More details on installation and troubleshooting <a href="https://github.com/azlux/log2ram">here</a></p>
<h2 id="install-podman">Install Podman</h2>
<p>Podman is a tool for managing OCI containers and pods. Don&rsquo;t worry about what it is and what it does. You will have your answers as soon as you start using it. You can use below command to install podman</p>
<p><code>sudo apt install podman</code></p>
<p>Now run <code>podman ps</code> it&rsquo;s output should be clean one liner. If you see error relate to <code>cgroup</code> do the following:</p>
<ol>
<li>Create directory <code>mkdir -p ~/.config/containers</code></li>
<li>Add a file <code>containers.conf</code> in the directory created above using below command</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cat &gt; ~/.config/containers/containers.conf
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>engine<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">events_logger</span> <span style="color:#666">=</span> <span style="color:#b44">&#34;file&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">cgroup_manager</span> <span style="color:#666">=</span> <span style="color:#b44">&#34;cgroupfs&#34;</span>
</span></span></code></pre></div><ol start="3">
<li>Run the <code>podman ps</code> command again and the error related to cgroup should be gone.</li>
</ol>
<h2 id="mount-external-drives">Mount External Drives</h2>
<p>Our apps and data will stay on external drives since we want to prevent wear and tear of memory card. Follow these steps to mount external drive:</p>
<ol>
<li>Your external drive should be visible in output of command <code>sudo blkid</code></li>
<li>Note the UUID corresponding to your drive from above command</li>
<li>Create a folder like <code>/mnt/avalon</code> where we will mount our external drive. Change permissions or ownership of this directory as required.</li>
<li>Make backup of file <code>/etc/fstab</code> and add below line at the end of file. Update your UUID and mount location and keeping everything else same.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>UUID=f8cd0001-1328-4f6a-80fa-8c7b7dea09a4 /mnt/avalon ext4 defaults,auto,users,rw,nofail,exec 0 0
</span></span></code></pre></div></li>
<li>Use <code>mount -av</code> to reload changes made to <code>/etc/fstab</code></li>
</ol>
<p>You Raspberry Pi is now ready for installing self hosted applications.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>I am assuming you have ext4 drive. If your drive is formatted as some different filesystem you will have to update fstab accordingly. Here&rsquo;s a good <a href="https://pimylifeup.com/raspberry-pi-mount-usb-drive/">reference</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Toxic Positivity</title>
      <link>https://rohanrd.xyz/posts/toxic-positivity/</link>
      <pubDate>Sun, 12 Mar 2023 17:22:47 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/toxic-positivity/</guid>
      <description>Imagine our ancestors, who were primarily hunter-gatherers, when faced with predator like a Lion thought &amp;ldquo;This lion will not eat me&amp;rdquo;. Or consider example of the 2008 financial crisis, people thought &amp;ldquo;mortgage backed securities will never go down&amp;rdquo;. Then every now and then throughout the world their are banks that collapsed and eventually had to be bailed out by government. In each of these examples, people failed to consider a perspective.</description>
      <content:encoded><![CDATA[<p><img loading="lazy" src="/static/hunter-gatherer-cliff.jpg" alt=""  />
</p>
<p>Imagine our ancestors, who were primarily hunter-gatherers, when faced with predator like a Lion thought &ldquo;This lion will not eat me&rdquo;.
Or consider example of the 2008 financial crisis, people thought &ldquo;mortgage backed securities will never go down&rdquo;. Then every now and then
throughout the world their are banks that collapsed and eventually had to be bailed out by government. In each of these examples, people
failed to consider a perspective. These people were not dumb but they were blinded by what I call toxic positivity.
I see so many instances where the situation was dire and people were being positive about it. All it does is exacerbates the problem.</p>
<p>Now consider the flip side, which I think was how our hunter-gatherer ancestors would have solved the problem.
Instead of relying on Lion not eating them. They controlled what they could, expecting the worst. They started living and
hunting in groups which gave them obvious advantage. They did this until man became the apex predator in the food chain. If they had not
done that we would not be here seeing this day.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> Same goes for the financial crisis, if more people had considered
a negative perspective<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup> that financial crisis could have been avoided. This negative perspective is what I call thoughtful
negativity.</p>
<blockquote>
<p>Thoughtful negativity is better than toxic positivity</p>
</blockquote>
<p>In conclusion what I want to say is negative perspective is not bad. Perception of reality is always subjective. If we consider the negative
perspective along with positive, I think, we get a more clearer picture of reality.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Reminds me of a scene from The Leftovers season 2. It&rsquo;s opening scene and is very beautiful depiction of how our human race has evolved. I will not spoil that scene for you. Go watch it, it&rsquo;s worth watching.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>Few people did considered the negative perspective and earned quite some money. You can watch the movie Big Short or related documentaries if you haven&rsquo;t already&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Social Media and Decentralization</title>
      <link>https://rohanrd.xyz/posts/social-media-and-decentralization/</link>
      <pubDate>Tue, 29 Nov 2022 18:48:45 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/social-media-and-decentralization/</guid>
      <description>How decentralization is going to change social media</description>
      <content:encoded><![CDATA[<p>If you have been following the Twitter drama over last month, you must have heard about Mastodon. Ten&rsquo;s of thousands of people are leaving Twitter for Mastodon. What is Mastdon? Originally it&rsquo;s an extinct animal but a few years ago <a href="https://toot.community/@Gargron@mastodon.social">Eugen Rochko</a> created a new social network called Mastodon. This is not just any social network, it&rsquo;s a federated. What do I mean by that?</p>
<p>Consider this, you have Instagram account but you want to follow someone on Twitter, now you know this is not possible with our conventional social networks. Not that this is technically impossible as you will see in some time. This is not possible frankly because it is not conducive to growth of these giant companies. You see, the primary stream of income for these social networks is Ad revenue and that will grow only if users spend more time on their app or website. If they implemented something that will allow interoperability then they will be shooting themselves in the foot as they will no longer be able to hold their own users captive by employing questionable algorithms and dark UI patterns. Also this will allow small companies or someone like you and me to start our own social network and let their users interact with our social network. There social network will not be the walled garden that they so desperately want it to be.</p>
<p>This all sounds bleak but soon things are going to change because I believe people eventually choose freedom and power of choice over convenience. This is exactly the things that a new protocol called ActivityPub enables. Any social network that implements this protocol will make that network compatible with other social networks who implemented the protocol. I believe these decentralized networks are set to take over conventional social media over next few decades. You might ask why I&rsquo;m so sure of it. Imagine telling the idea of democracy a few centuries back. And that is exactly the idea of these new social network sounds like to conventional social media users today.</p>
<p>Mastodon is the first social network to support ActivityPub. It&rsquo;s similar to Twitter but is far superior to it in terms of features. Pixelfed is another social network that supports ActivityPub and is similar to Instagram. Needless to say these networks allow you to follow people from one another. There are many networks that are already supporting ActivityPub and you can find out about them <a href="fediverse.party">here</a></p>
<p>Like I meantioned earlier you and me can host our own Mastodon instance that can federate with other networks. Because there are 1000s of servers spread across the globe each with it&rsquo;s own rules, it becomes easy to manage and moderate these social networks. Like minded individuals can start their own server to discuss topics of their interest, some of these are listed <a href="https://joinmastodon.org/servers">here</a>. Moreover the decentralization helps in blocking bad actors that are engaging in harmful behaviours. All servers are run voluntarily by few community members, which means there are no ads! I think this model of social media reflects our societies in general. There&rsquo;s only one con that I see at the moment and that is your experience depends on the server on which you have signed up but once you figured that out you are ready to go. I highly recommend you check out <a href="https://fedi.tips">fedi.tips</a>. If you want to join one of these networks, I would recommend <a href="https://toot.community">https://toot.community</a> for something like Twitter and <a href="https://pixelfed.social">https://pixelfed.social</a> for something like Instagram. Of course you can follow people other network once you join one of them. It&rsquo;s just PixelFed is more suitable if you prefer pictures over text.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Getting Started With Self Hosting</title>
      <link>https://rohanrd.xyz/posts/getting-started-with-self-hosting/</link>
      <pubDate>Sat, 09 Apr 2022 07:59:26 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/getting-started-with-self-hosting/</guid>
      <description>Get started with your self hosting journey</description>
      <content:encoded><![CDATA[<p><img loading="lazy" src="/static/pi_server.jpg" alt="Raspberry PI server with external hard drive"  />
</p>
<p>People in tech circles are increasingly moving towards self hosting and I believe this trend is going to catch on with general population as both hardware and Software continues to evolve. This evolution has already reached to a point where a layman with few hours to spare can self host alernative to most of popular cloud based applications. In this blog post I am going to show you the hardware that I have used for low cost server setup at my home.</p>
<h2 id="the-server">The Server</h2>
<p>You can use old PC/laptop as server for your home in which case you don&rsquo;t even have to buy anything but I would recommend that you use a Raspberry Pi instead. There are quite a few advantages if you go this route.</p>
<ul>
<li>They are fast and low on power consumption. You can stream 4K content with Raspberry Pi 4.</li>
<li>They are cheap. 4GB version will cost you around 5000 INR without accessories.</li>
</ul>
<p>We want our server to run 24x7<sup>1</sup> and the power consumption adds up over time so it is an important factor while choosing the hardware for our server. A Raspberry Pi will cost you once in beginning but its going to save you lot of money in the long run. Here&rsquo;s a <a href="https://tinyurl.com/nwu6sn4s">calculator</a> to calculate power consumption of any appliance. 10W is average power consumption of Pi. Try putting 65W on that calculator and see how numbers change.</p>
<p><img loading="lazy" src="/static/power_calc.png" alt=""  />
</p>
<h2 id="storage">Storage</h2>
<p>If you are just beginning your self hosting journey I would advise you to start with a Pen drive. This way you can experiment while keeping costs down. If you are determined to have long term self hosting solution then read on.</p>
<p>The storage you choose depends on what you want to use your server for. For me, I want to host a Jellyfin media server that can playback 4K content. This requires that I have at least a Tera byte of storage. Note that Raspberry Pi runs of a memory card and you don&rsquo;t need anything else but I would suggest to use that only for booting the Pi. Any data that you want to store for long term should never end up on that memory card. Always use external storage like a pen drive or HDD with Pi. suitable for its booting but not for any long term storage.</p>
<p><strong>Few considerations while choosing storage hardware</strong></p>
<ol>
<li>Pi should be able to serve 4K content. This requires that the HDD be connected over USB3.0.</li>
<li>The drive should go to sleep when not in use. This reduces power consumption as well as wear and tear of the drive thus increasing the life span.</li>
<li>Our storage solution should have proper heat dissipation.</li>
</ol>
<p>You can connect an external HDD to your Pi and be done with it but there are 2 disavantages to this approach. First, xxternal HDDs have poor heat dissipation which is okay considering they are built for one off usage and not running a mediacenter of them. They are certainly not designed to run 24x7. Second, external HDDs usually have 2.5inch form factor which limits their speed to 5400RPM. These are basically same hard disks as laptops which are slow as compared to internal hard disks used in desktops</p>
<p>After careful consideration of many HDD connectivity solutions I came to conclusion that PiBox dock is best hardware for our low cost server. It can suspend the drive when not in use. It supports both 3.5/2.5 inch HDD and has USB3.0 interface. I have chosen Seagate Barracuda 3.5 inch HDD for my requirement. Another advantage of going with internal HDD is that they are cheaper as compared to their external counterpart. Regarding heat dissipation, since our drive is internal and docked there is no need for additional heat dissipation. I have checked temperatures and they are well within operating range of HDD. Ideally we should be using an enclosure with fans but that goes way over the budget for the low cost server that we want to build.</p>
<p><strong>Bill of Materials</strong>:</p>
<ol>
<li><a href="https://www.pibox.in/product/raspberry-pi-4b-4gb/">Raspberry PI 4</a> with case and fan - INR 5800</li>
<li><a href="https://www.pibox.in/product/pibox-india-usb-3-0-hard-drive-docking-station-usb-to-sata-docking-station-with-10tb-drive-support-for-2-5-inch-3-5-inch-hdd-ssd-supports-sata-i-ii-iii-and-uasp-asm1153e-top-loading-desi/">PiBox HDD Dock</a> - INR 1100</li>
<li><a href="https://www.amazon.in/Seagate-BarraCuda-ST1000DM010-Desktop-Latest/dp/B01LNJBA2I/">Seagate Barracuda HDD 1TB</a> - INR 3000</li>
</ol>
<p>It costs little below INR 10,000 but if you compared this to the NAS solutions that are available in market this is pretty low cost. Not to mention its robust as well. I have been streaming 4K content, hosting an alternative to Google Photos and also a document server capable of running OCR on incoming documents but Raspberry Pi hardly breaks a sweat<sup>2</sup>. It&rsquo;s a tiny little beast. In my next post I will show you the kind of applications that I am self hosting at home. So stay tuned.</p>
<p><img loading="lazy" src="/static/pi.jpg" alt=""  />
</p>
<p>Notes:</p>
<ol>
<li>We can turn off our server every night further improving cost savings but I will leave that as an exercise for the reader</li>
<li>Your Pi will have hard time if you are expecting it to perform OCR while also transcoding media streams for multiple users. So yes your apps need to be configured properly to make the best out of this low cost setup.</li>
</ol>
]]></content:encoded>
    </item>
    <item>
      <title>Why Start Self Hosting</title>
      <link>https://rohanrd.xyz/posts/why-start-self-hosting/</link>
      <pubDate>Wed, 23 Mar 2022 00:02:34 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/why-start-self-hosting/</guid>
      <description>Take control back of your digital life</description>
      <content:encoded><![CDATA[<p>Remember Picasa? There is no native application even today that comes close to it&rsquo;s feature parity. But sadly it was discontinued in favour of a cloud application: Google Photos. What happened with Picasa also happened to millions of other applications around the same time Picasa was discontinued. The applications we use to run on our PC have moved to cloud. It makes sense from corporations perspective because they get more control over updates, user data and licenses but users are at huge disadavantage as they no longer are in control of their own data. You might ask why that is such an issue? Let&rsquo;s see:</p>
<p>Consider this, you carefully curate your playlists on Spotify but every now and then you see a certain song missing from your playlist. Same goes for videos saved in your YouTube playlists or other music/video streaming services. Then there is also the case of OTT streaming platforms where the show you were going to watch over weekend has now disappeared. If this was not bad imagine what happens when you need document from your email but the provider has suspended your account because of something you did (which was not even violation of terms of service) on other service of that email provider. <a href="https://hn.algolia.com/?q=account+suspended">Hacker News is littered with such stories</a>. There are some stories where the user never figured out what they had done wrong to deserve suspension of account.</p>
<p>Then there is this whole different problem of corporations tracking you and your data. Whenever I bring this up people are like &ldquo;I don&rsquo;t care, I have nothing to hide&rdquo;. But this is exactly similiar to saying &ldquo;I don&rsquo;t care about free speech because I have nothing to say&rdquo;. Would you give up your right to free speech because you have nothing to say? No. The same goes about right to privacy. The data you share is used to cater you personalized ads. That same data is also used to ensure that you spend maximum time with the particular service. There are millions of engineers across the world who are getting paid hefty sum to keep as many eyeballs as possible glued to service offered by their employers. This engineering talent is supposed to be solving world&rsquo;s problems but instead they are ensuring how everyone wastes their time. That&rsquo;s a whole different topic for another blog post.</p>
<p>What self hosting does is it protects you against all these issues and more. It gives you the peace of mind by keeping you in control of your data. You can choose if you never want your data to leave your premises or home. You can also choose to make your data available to you whenever or wherever you want it securely. In upcoming posts, we will explore self hosted applications and how they protect you and your data. But if you cannot wait, head over to <a href="https://www.reddit.com/r/selfhosted">r/selfhosted</a> or check out this <a href="https://github.com/awesome-selfhosted/awesome-selfhosted/blob/master/README.md">awesome self hosted list</a> to get started with your self hosting journey.</p>
<p>Subscribe to RSS feed to stay updated.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Monitoring Solar Power Over WiFi</title>
      <link>https://rohanrd.xyz/posts/monitoring-solar-power-over-wifi/</link>
      <pubDate>Wed, 20 Jan 2021 00:00:00 +0000</pubDate>
      <guid>https://rohanrd.xyz/posts/monitoring-solar-power-over-wifi/</guid>
      <description>Measuring solar panel output with Arduino and ESP8266 and viewing it on Grafana dashboard with InfluxDB hosted on Raspberry PI</description>
      <content:encoded><![CDATA[<p><img loading="lazy" src="/static/solar_panel.jpg" alt="solar panel"  />
</p>
<p>India is rapidly switching to renewable energy sources. It&rsquo;s not just the government that&rsquo;s making the switch but people as well have been switching to solar roof tops for their power requirements. In our society, 30-40% houses have set up solar panels on their roofs. Most of these houses do not pay at all to the MSEB but on the other hand contribute surplus to the grid.</p>
<p>The one that is setup at my home - shown in picture above - has 2.27 kWh capacity. Over the past 3-4 months I have been monitoring the output of these panels and they have been on average producing 220-270 kW per month. There is around 70-100 units of surplus which is fed into the grid every month. I have seen output of about maximum 11.6 kWh in a single day. Rest of days it fluctuates in 6-8 kWh range. There are many parameters affecting output like weather, panel temperature, dust on the panels. I do not have any control over the weather but rest two parameters can be kept in check to improve efficiency of these panels.</p>
<p>Currently, only way to monitor output of these panels is by checking the inverter manually. This is not helpful at all. Moreover I would prefer to have this data recorded on per minute basis rather than looking at aggregates at the end of the day. I need a system that will continuously log the panel output to a central database. Logging to central database has its own advantages: I can not only do a thorough analysis but also get power stats over the Internet. Let&rsquo;s build this 😃</p>
<h3 id="components">Components</h3>
<p><img loading="lazy" src="/static/sct_resize.jpg" alt="floatright"  title="The sensor must be clipped on phase"  />
</p>
<ol>
<li>SCT-013-030: A non-invasive current sensor with a clip-on. I did not wanted to meddle with 230V mains supply, hence this sensor. You can clip it on any wire and it will generate output voltage corresponding to the current flowing from the wire.</li>
<li>Arduino Uno: I had this sitting in my closet. It has an ADC onboard which can be used to measure output of the current sensor.</li>
<li>ESP01 WiFi module: This module can directly transmit data over WiFi network and it was the cheapest one that I found. Also, it seems it can be easily interfaced with Arduino.</li>
<li>3.3V power supply: ESP01 needs a regulated 3.3v power supply</li>
<li>A raspberry pi: This is used for capturing the data shared by ESP01 and as a data logger. Eventually this will also be used as a server to broadcast captured data over Internet.</li>
</ol>
<h3 id="a-note-on-esp01">A Note on ESP01</h3>
<p>I am using Micropython firmware for ESP01. Stock AT firmware should also work. I chose Micropython because I was facing issues communicating with Arduino over serial. Although I later found out that the issue was because of power supply. ESP01 strictly needs 3.3V[1]. The issue went away once it was powered by a dedicated 3.3V power supply instead of Arduino&rsquo;s 3.3V supply. I spent lot of time resolving this issue. 😅</p>
<h3 id="interfacing-arduino-with-esp01">Interfacing Arduino With ESP01</h3>
<p>The interfacing here is for serial communication between Arduino and ESP01. If you want to flash or load programs on ESP01 using Arduino you will have to change wiring. Refer this <a href="https://www.ankshilp.com/flashing_esp_with_arduino/">note</a> for wiring, flashing and loading programs on ESP01.</p>
<p>Below is the wiring between UNO and ESP01 for serial communication. You can choose different pins for RX &amp; TX in your code.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>    UNO — ESP8266
</span></span><span style="display:flex;"><span>    RX — 11 
</span></span><span style="display:flex;"><span>    TX — 10 
</span></span><span style="display:flex;"><span>    GND — GND 
</span></span><span style="display:flex;"><span>    3.3V — VCC 
</span></span><span style="display:flex;"><span>    3.3V — CH_PD
</span></span></code></pre></div><p>The configuration of Arduino environment is out of scope of this article. Arduino IDE makes it very easy to load programs on Arduino.</p>
<h3 id="serial-io-and-broadcast">Serial I/O and Broadcast</h3>
<p><strong>Serial write with Arduino</strong><br>
Here&rsquo;s listing of code that writes <code>Hello from Arduino</code> to ESP01</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#080">#include</span> <span style="color:#080">&lt;SoftwareSerial.h&gt;</span><span style="color:#080">
</span></span></span><span style="display:flex;"><span><span style="color:#080">#define RX 10
</span></span></span><span style="display:flex;"><span><span style="color:#080">#define TX 11
</span></span></span><span style="display:flex;"><span><span style="color:#080"></span>SoftwareSerial <span style="color:#00a000">esp8266</span>(RX, TX);
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setup</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    esp8266.begin(<span style="color:#666">115200</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">loop</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    esp8266.println(<span style="color:#b44">&#34;Hello from Arduino&#34;</span>);
</span></span><span style="display:flex;"><span>    delay(<span style="color:#666">3000</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Serial read from ESP01</strong><br>
ESP SoC has 2 serial I/Os. UART 1 is write only and UART 0 can do perform both read and write. That is why we have to use UART0 for communication with Arduino. But there&rsquo;s a catch with UART0, it is used by micropython REPL for loading programs. The only way to communicate with Arduino over serial is to detach UART0 from REPL. Doing this would disable the functionality to load or edit programs until it is re-attached[2].</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>uos<span style="color:#666">.</span>dupterm(<span style="color:#a2f;font-weight:bold">None</span>, <span style="color:#666">1</span>)            <span style="color:#080;font-style:italic"># detach UART from REPL. </span>
</span></span><span style="display:flex;"><span>uart <span style="color:#666">=</span> UART(<span style="color:#666">0</span>, <span style="color:#666">115200</span>)          <span style="color:#080;font-style:italic"># UART 0 is available for our program</span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span> uart<span style="color:#666">.</span>any():
</span></span><span style="display:flex;"><span>    message <span style="color:#666">=</span> uart<span style="color:#666">.</span>readline()   <span style="color:#080;font-style:italic"># read data from serial input</span>
</span></span><span style="display:flex;"><span>uos<span style="color:#666">.</span>dupterm(uart, <span style="color:#666">1</span>)            <span style="color:#080;font-style:italic"># re-attach UART with REPL before end of program</span>
</span></span></code></pre></div><p><strong>Broadcast over WiFi</strong><br>
Now that the data is read from serial it&rsquo;s time to broadcast it over WiFi using below function</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">broadcast</span>(message: <span style="color:#a2f">bytes</span>):
</span></span><span style="display:flex;"><span>    cs <span style="color:#666">=</span> socket(AF_INET, SOCK_DGRAM)
</span></span><span style="display:flex;"><span>    cs<span style="color:#666">.</span>sendto(message, (<span style="color:#b44">&#39;192.168.0.255&#39;</span>, <span style="color:#666">7007</span>))
</span></span></code></pre></div><p>The socket is a UDP socket as selected by <code>SOCK_DGRAM</code> parameter. We are choosing to send the message over broadcast address <code>192.168.0.255</code> so that we can receive it on any device on network. Listening to the message on a Linux system is as easy as running the command</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#080;font-style:italic"># listen continuosly for messages on udp socket port 7007</span>
</span></span><span style="display:flex;"><span>nc -kul <span style="color:#666">7007</span>
</span></span></code></pre></div><p>I would recommend that you run the serial read and broadcast operation on your ESP01 before you load the actual program to confirm everything is working properly.</p>
<h3 id="measuring-current">Measuring Current</h3>
<p>We can measure AC output voltage of CT sensor using ADC on Arduino. The signal first needs to be shifted above 0V in order to meet requirements of ADC. We use a voltage divider circuit as shown below to shift the analog signal by 2.5V so that its lower peak always stays above 0V. Note that our CT sensor has  output of 0-1V.</p>
<p><img loading="lazy" src="/static/circuit.png" alt=""  />
</p>
<p>We will be using <a href="https://github.com/openenergymonitor/EmonLib">EmonLib</a> from <a href="https://openenergymonitor.org/">Open Energy Monitor</a> to sample and measure the RMS current. Here&rsquo;s a code listing to read current from A0 pin with EmonLib.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>EnergyMonitor emon1;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setup</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  Serial.begin(<span style="color:#666">9600</span>);
</span></span><span style="display:flex;"><span>  emon1.current(<span style="color:#666">1</span>, <span style="color:#666">30</span>); <span style="color:#080;font-style:italic">//specify pin and calibration
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">loop</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#0b0;font-weight:bold">double</span> I <span style="color:#666">=</span> emon1.calcIrms(<span style="color:#666">1480</span>); 		<span style="color:#080;font-style:italic">//number of samples to take 
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>  Serial.println(<span style="color:#b44">&#34;cu value=&#34;</span> <span style="color:#666">+</span> String(I));	<span style="color:#080;font-style:italic">//write data to esp in a InfluxDB line format
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>  delay(<span style="color:#666">3000</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>emon1.current(1,30)</code> is used to choose ADC pin and for calibration. For the sensor I am using, it is 30. You can find out more about calibration calculation <a href="https://github.com/openenergymonitor/learn/blob/master/view/electricity-monitoring/ctac/emonlib-calibration-theory.md">here</a>.</p>
<h3 id="data-logging-and-dashboarding">Data Logging And Dashboarding</h3>
<p>For logging we are going to use timeseries database InfluxDB. InfluxDB integrates well with Grafana which we will be using for dashboarding. Both InfluxDB and Grafana will be installed on Raspberry Pi. Installation of both application is pretty straightforward. You can refer the guides included in notes below[3].</p>
<h4 id="ingesting-data-with-influxdb-line-protocol">Ingesting Data With InfluxDB Line Protocol</h4>
<p>The fastest way of inserting a record in InfluxDB is through it&rsquo;s CLI. Here&rsquo;s an example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ influxdb
</span></span><span style="display:flex;"><span>&gt; CREATE pmon
</span></span><span style="display:flex;"><span>&gt; USE pmon
</span></span><span style="display:flex;"><span>&gt; cu value=2.2
</span></span><span style="display:flex;"><span>&gt; cu value=2.5
</span></span></code></pre></div><p>First we create database pmon and then insert values 2.2 and 2.5 as current(cu) in it. You can see inserted records along with timestamps using <code>show measurements</code> command. InfluxDB supports a lot of interfaces REST, UDP, etc,. Since we have already implemented the broadcast over UDP with ESP01 we will be using UDP interface of InfluxDB but first we need to enable UDP interface before we can start ingesting data over it. You can enable the interface in <code>influxdb.conf</code>. This file on  exist at <code>/etc/influxdb/influxdb.conf</code> on raspbian. In the udp section add</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#666">[[</span>udp<span style="color:#666">]]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b8860b">enabled</span> <span style="color:#666">=</span> <span style="color:#a2f">true</span>
</span></span><span style="display:flex;"><span>  bind-address <span style="color:#666">=</span> <span style="color:#b44">&#34;0.0.0.0:7007&#34;</span>		<span style="color:#080;font-style:italic"># port address to listen on</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b8860b">database</span> <span style="color:#666">=</span> <span style="color:#b44">&#34;pmon&#34;</span>
</span></span><span style="display:flex;"><span>  retention-policy <span style="color:#666">=</span> <span style="color:#b44">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>  batch-size <span style="color:#666">=</span> 2						<span style="color:#080;font-style:italic"># write to database after collecting this many measurements</span>
</span></span></code></pre></div><p>There are more options in the config file which you can explore as per your requirement.</p>
<h4 id="dashboard-with-grafana">Dashboard with Grafana</h4>
<p>Integrating Grafana with InfluxDB is pretty easy. Grafana can be accessed from browser for its configuration. Just point your browser to your Pi IP with 3000 port and that should open Grafana. You will have to go through some basic configuration steps and then from the settings panel you can add InfluxDB as data source. That&rsquo;s it. You can start creating panels for the data that has been recorded.</p>
<p>Here&rsquo;s Grafana dashboard for my home setup</p>
<p><img loading="lazy" src="/static/solar.png" alt=""  />
</p>
<h4 id="creating-grafana-panels">Creating Grafana Panels</h4>
<p>InfluxDB queries are fairly easy to understand so I will just put the queries behind each panel that I have used</p>
<ol>
<li>Current Panel<br>
<code>SELECT value FROM &quot;cu&quot;</code></li>
<li>Power Panel<br>
<code>SELECT value*252 FROM &quot;cu&quot;</code><br>
The voltage at my home averages around 252V. Since, P=VxI. Power generated = 252*value.</li>
<li>Energy Generated Hourly in Wh panel<br>
<code>SELECT integral(&quot;power&quot;)/3600 FROM (SELECT value*252 AS power FROM &quot;cu&quot;) WHERE $timeFilter GROUP BY time(1h) fill(null)</code><br>
Energy generated is the area under the power curve. Hence, the integral. We are calculating energy generated on per hour basis.</li>
<li>Today&rsquo;s generation panel<br>
<code>SELECT integral(&quot;value&quot;)*252/3600000 FROM (SELECT value FROM &quot;cu&quot;)  where time &gt; now()-12h</code><br>
Same as energy generated calculation but here we do for last 12 hours.</li>
<li>Monthly energy generated panel<br>
Same as today&rsquo;s generation panel but calculated over period of <code>30d</code></li>
<li>Carbon panels<br>
Carbon generated per kWh is called as carbon factor for the grid. For India, it is 0.7 and thus <code>Energy(E)*0.7</code> gives us the carbon removed from atmosphere.</li>
</ol>
<h3 id="final-words">Final Words</h3>
<p>I am very happy with this setup and it&rsquo;s been very reliable so far even though I have done all of this on a bread board! The current readings are pretty accurate above 1A. There is deviation in power and energy measurements but this is because we are assuming constant voltage while in reality it fluctuates quite a bit. Maybe I will add voltage sensor to this!</p>
<h3 id="repository">Repository</h3>
<p>Both micropython and arduino code is uploaded at <a href="https://github.com/quaintdev/EnergyMonitor">https://github.com/quaintdev/EnergyMonitor</a></p>
<p>Notes:</p>
<ol>
<li>There are instances when people have ran ESP01 chip on 5V. This is most probably because of how different manufactures design their chips. The ESP8266 SoC on board ESP01 needs 3.3V.</li>
<li>Our program is expected to communicate with Arduino continously and that is why we cannot re-attach the REPL. In the final code listing I have added delay of 10 seconds before detatching REPL. This gives us enough time to load new programs on ESP if required. If we do not do this then we loose the ability to load programs on ESP until we re-flash the firmware.</li>
<li><a href="https://grafana.com/tutorials/install-grafana-on-raspberry-pi/">Install grafana on Raspberry PI</a><br>
<a href="https://gist.github.com/boseji/bb71910d43283a1b84ab200bcce43c26">Install influxdb on Raspberry PI</a></li>
<li><a href="https://learn.openenergymonitor.org/electricity-monitoring/ct-sensors/interface-with-arduino">CT sensor interfacing with Arduino</a></li>
</ol>
]]></content:encoded>
    </item>
    <item>
      <title>Inheritance with Golang</title>
      <link>https://rohanrd.xyz/posts/inheritance-with-golang/</link>
      <pubDate>Sun, 24 May 2020 12:49:08 +0000</pubDate>
      <guid>https://rohanrd.xyz/posts/inheritance-with-golang/</guid>
      <description>Implementing inheritance pattern in Go without using Interfaces</description>
      <content:encoded><![CDATA[<p>After taking dozens of Golang interviews over past 6 months, I have realized lot of candidates have no idea when to use or not use Go interfaces. During interviews, I asked people simple problem: there are 3 entities Student, Teacher and Employee. All these 3 entities will have a name parameter. We need a method which will print name of that entity on console. There must be only one implementation of the method and we should be able to call the method as below</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">var</span> s Student
</span></span><span style="display:flex;"><span>    s<span style="color:#666">.</span>PrintName()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">var</span> t Teacher
</span></span><span style="display:flex;"><span>    t<span style="color:#666">.</span>PrintName()
</span></span></code></pre></div><p>Sounds simple, right? Surprisingly, only 2-3 candidates gave the expected answer, others chose interfaces to solve this. They would define <code>printName()</code> as interface method and then I would go on to ask them would it not require 3 methods each for one entity? That would confuse them and they would then come up with even bizzare solution to this problem using interfaces.</p>
<h2 id="the-solution">The solution</h2>
<p>This problem does not require interfaces at all. Consider below code</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>    type People struct{
</span></span><span style="display:flex;"><span>        Name struct
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">func</span> (p <span style="color:#666">*</span>People) PrintName(){
</span></span><span style="display:flex;"><span>        fmt<span style="color:#666">.</span>Println(<span style="color:#b44">&#34;Name:&#34;</span>, p<span style="color:#666">.</span>Name)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    type Student struct{
</span></span><span style="display:flex;"><span>        People
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    type Teacher struct{
</span></span><span style="display:flex;"><span>        People
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Below code now works perfectly</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">var</span> s Student
</span></span><span style="display:flex;"><span>    s<span style="color:#666">.</span>PrintName()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">var</span> t Teacher
</span></span><span style="display:flex;"><span>    t<span style="color:#666">.</span>PrintName()
</span></span></code></pre></div><p>The name parameter is common across all three entities so we define new entity called <code>Person</code> and embed it inside all three entities. We implement a method call <code>PrintName()</code> on <code>Person</code> struct and that method becomes available for all three entities.</p>
<p>As you can see, embedding is the fastest way to acheieve inheritance in Golang. That&rsquo;s all for now people.</p>
<p>Take care &amp; have a great day!</p>
]]></content:encoded>
    </item>
  </channel>
</rss>
