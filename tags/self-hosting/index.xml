<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Self Hosting on rohanrd.xyz</title>
    <link>https://rohanrd.xyz/tags/self-hosting/</link>
    <description>Recent content in Self Hosting on rohanrd.xyz</description>
    <generator>Hugo -- 0.125.1</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 19 Mar 2023 17:07:37 +0530</lastBuildDate>
    <atom:link href="https://rohanrd.xyz/tags/self-hosting/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>First Steps After Installing Raspbian</title>
      <link>https://rohanrd.xyz/posts/first-steps-after-installing-raspbian/</link>
      <pubDate>Sun, 19 Mar 2023 17:07:37 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/first-steps-after-installing-raspbian/</guid>
      <description>We discussed regarding the hardware that I use for self hosting here. Let&amp;rsquo;s prepare our Pi for selfhosting
Install Raspbian Downloads
Raspberry Pi Imager is the quick and easy way to install Raspberry Pi OS and other operating systems to a microSD card, ready to use with your Raspberry Pi Download Raspbian Lite. Choose 64 bit version Once you have downloaded these, start imager tool. Now choose &amp;ldquo;Use custom&amp;rdquo; option and specify the OS image location.</description>
      <content:encoded><![CDATA[<p>We discussed regarding the hardware that I use for self hosting <a href="https://rohanrd.xyz/posts/getting-started-with-self-hosting/">here</a>. Let&rsquo;s prepare our Pi for selfhosting</p>
<h2 id="install-raspbian">Install Raspbian</h2>
<p>Downloads</p>
<ol>
<li><a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a> is the quick and easy way to install Raspberry Pi OS and other operating systems to a microSD card, ready to use with your Raspberry Pi</li>
<li><a href="https://www.raspberrypi.com/software/operating-systems/">Download Raspbian Lite.</a> Choose 64 bit version</li>
</ol>
<p>Once you have downloaded these, start imager tool. Now choose &ldquo;Use custom&rdquo; option and specify the OS image location. Next you have to choose the storage option which will list the memory card that you will be inserting in Raspberry Pi. Once you have set these, select the gear icon to specify initial preferences for the OS. specify below options and check the set hostname box. You can also set the locale. I am assuming you will be using Ethernet connection. But if you want to use WiFi you should set those preferences as well.</p>
<p><img loading="lazy" src="/static/os-preferences.png" alt=""  />
</p>
<p>Write the image, it will take some time and will give a message when you can eject the memory card. You can now insert it in the memory card slot on your Pi. At this point you are ready to power on your Pi. Once it&rsquo;s powered on, use app like Wifiman on your phone to determine IP address of your Pi. You can log into the shell of your Pi using ssh</p>
<p><code>ssh pi@192.168.1.12</code></p>
<p>It will prompt you for the password that we set earlier. Your Pi is ready to self host but let&rsquo;s do some housekeeping before we install any applications.</p>
<h2 id="install-log2ram">Install Log2ram</h2>
<p>Log2ram is required because we don&rsquo;t want to write logs generated by our applications to the memory card. Instead we store those logs in RAM. This is mostly useful for preventing wear and tear of our SD card. Run below commands to install <code>log2ram</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#a2f">echo</span> <span style="color:#b44">&#34;deb [signed-by=/usr/share/keyrings/azlux-archive-keyring.gpg] http://packages.azlux.fr/debian/ bookworm main&#34;</span> | sudo tee /etc/apt/sources.list.d/azlux.list
</span></span><span style="display:flex;"><span>sudo wget -O /usr/share/keyrings/azlux-archive-keyring.gpg  https://azlux.fr/repo.gpg
</span></span><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>sudo apt install log2ram
</span></span></code></pre></div><p>After installation you need to reboot. You can check if it&rsquo;s working by checking log2ram service status or by running below command</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo df -h | grep log2ram
</span></span></code></pre></div><p>More details on installation and troubleshooting <a href="https://github.com/azlux/log2ram">here</a></p>
<h2 id="install-podman">Install Podman</h2>
<p>Podman is a tool for managing OCI containers and pods. Don&rsquo;t worry about what it is and what it does. You will have your answers as soon as you start using it. You can use below command to install podman</p>
<p><code>sudo apt install podman</code></p>
<p>Now run <code>podman ps</code> it&rsquo;s output should be clean one liner. If you see error relate to <code>cgroup</code> do the following:</p>
<ol>
<li>Create directory <code>mkdir -p ~/.config/containers</code></li>
<li>Add a file <code>containers.conf</code> in the directory created above using below command</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cat &gt; ~/.config/containers/containers.conf
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>engine<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">events_logger</span> <span style="color:#666">=</span> <span style="color:#b44">&#34;file&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">cgroup_manager</span> <span style="color:#666">=</span> <span style="color:#b44">&#34;cgroupfs&#34;</span>
</span></span></code></pre></div><ol start="3">
<li>Run the <code>podman ps</code> command again and the error related to cgroup should be gone.</li>
</ol>
<h2 id="mount-external-drives">Mount External Drives</h2>
<p>Our apps and data will stay on external drives since we want to prevent wear and tear of memory card. Follow these steps to mount external drive:</p>
<ol>
<li>Your external drive should be visible in output of command <code>sudo blkid</code></li>
<li>Note the UUID corresponding to your drive from above command</li>
<li>Create a folder like <code>/mnt/avalon</code> where we will mount our external drive. Change permissions or ownership of this directory as required.</li>
<li>Make backup of file <code>/etc/fstab</code> and add below line at the end of file. Update your UUID and mount location and keeping everything else same.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>UUID=f8cd0001-1328-4f6a-80fa-8c7b7dea09a4 /mnt/avalon ext4 defaults,auto,users,rw,nofail,exec 0 0
</span></span></code></pre></div></li>
<li>Use <code>mount -av</code> to reload changes made to <code>/etc/fstab</code></li>
</ol>
<p>You Raspberry Pi is now ready for installing self hosted applications.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>I am assuming you have ext4 drive. If your drive is formatted as some different filesystem you will have to update fstab accordingly. Here&rsquo;s a good <a href="https://pimylifeup.com/raspberry-pi-mount-usb-drive/">reference</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Getting Started With Self Hosting</title>
      <link>https://rohanrd.xyz/posts/getting-started-with-self-hosting/</link>
      <pubDate>Sat, 09 Apr 2022 07:59:26 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/getting-started-with-self-hosting/</guid>
      <description>Get started with your self hosting journey</description>
      <content:encoded><![CDATA[<p><img loading="lazy" src="/static/pi_server.jpg" alt="Raspberry PI server with external hard drive"  />
</p>
<p>People in tech circles are increasingly moving towards self hosting and I believe this trend is going to catch on with general population as both hardware and Software continues to evolve. This evolution has already reached to a point where a layman with few hours to spare can self host alernative to most of popular cloud based applications. In this blog post I am going to show you the hardware that I have used for low cost server setup at my home.</p>
<h2 id="the-server">The Server</h2>
<p>You can use old PC/laptop as server for your home in which case you don&rsquo;t even have to buy anything but I would recommend that you use a Raspberry Pi instead. There are quite a few advantages if you go this route.</p>
<ul>
<li>They are fast and low on power consumption. You can stream 4K content with Raspberry Pi 4.</li>
<li>They are cheap. 4GB version will cost you around 5000 INR without accessories.</li>
</ul>
<p>We want our server to run 24x7<sup>1</sup> and the power consumption adds up over time so it is an important factor while choosing the hardware for our server. A Raspberry Pi will cost you once in beginning but its going to save you lot of money in the long run. Here&rsquo;s a <a href="https://tinyurl.com/nwu6sn4s">calculator</a> to calculate power consumption of any appliance. 10W is average power consumption of Pi. Try putting 65W on that calculator and see how numbers change.</p>
<p><img loading="lazy" src="/static/power_calc.png" alt=""  />
</p>
<h2 id="storage">Storage</h2>
<p>If you are just beginning your self hosting journey I would advise you to start with a Pen drive. This way you can experiment while keeping costs down. If you are determined to have long term self hosting solution then read on.</p>
<p>The storage you choose depends on what you want to use your server for. For me, I want to host a Jellyfin media server that can playback 4K content. This requires that I have at least a Tera byte of storage. Note that Raspberry Pi runs of a memory card and you don&rsquo;t need anything else but I would suggest to use that only for booting the Pi. Any data that you want to store for long term should never end up on that memory card. Always use external storage like a pen drive or HDD with Pi. suitable for its booting but not for any long term storage.</p>
<p><strong>Few considerations while choosing storage hardware</strong></p>
<ol>
<li>Pi should be able to serve 4K content. This requires that the HDD be connected over USB3.0.</li>
<li>The drive should go to sleep when not in use. This reduces power consumption as well as wear and tear of the drive thus increasing the life span.</li>
<li>Our storage solution should have proper heat dissipation.</li>
</ol>
<p>You can connect an external HDD to your Pi and be done with it but there are 2 disavantages to this approach. First, xxternal HDDs have poor heat dissipation which is okay considering they are built for one off usage and not running a mediacenter of them. They are certainly not designed to run 24x7. Second, external HDDs usually have 2.5inch form factor which limits their speed to 5400RPM. These are basically same hard disks as laptops which are slow as compared to internal hard disks used in desktops</p>
<p>After careful consideration of many HDD connectivity solutions I came to conclusion that PiBox dock is best hardware for our low cost server. It can suspend the drive when not in use. It supports both 3.5/2.5 inch HDD and has USB3.0 interface. I have chosen Seagate Barracuda 3.5 inch HDD for my requirement. Another advantage of going with internal HDD is that they are cheaper as compared to their external counterpart. Regarding heat dissipation, since our drive is internal and docked there is no need for additional heat dissipation. I have checked temperatures and they are well within operating range of HDD. Ideally we should be using an enclosure with fans but that goes way over the budget for the low cost server that we want to build.</p>
<p><strong>Bill of Materials</strong>:</p>
<ol>
<li><a href="https://www.pibox.in/product/raspberry-pi-4b-4gb/">Raspberry PI 4</a> with case and fan - INR 5800</li>
<li><a href="https://www.pibox.in/product/pibox-india-usb-3-0-hard-drive-docking-station-usb-to-sata-docking-station-with-10tb-drive-support-for-2-5-inch-3-5-inch-hdd-ssd-supports-sata-i-ii-iii-and-uasp-asm1153e-top-loading-desi/">PiBox HDD Dock</a> - INR 1100</li>
<li><a href="https://www.amazon.in/Seagate-BarraCuda-ST1000DM010-Desktop-Latest/dp/B01LNJBA2I/">Seagate Barracuda HDD 1TB</a> - INR 3000</li>
</ol>
<p>It costs little below INR 10,000 but if you compared this to the NAS solutions that are available in market this is pretty low cost. Not to mention its robust as well. I have been streaming 4K content, hosting an alternative to Google Photos and also a document server capable of running OCR on incoming documents but Raspberry Pi hardly breaks a sweat<sup>2</sup>. It&rsquo;s a tiny little beast. In my next post I will show you the kind of applications that I am self hosting at home. So stay tuned.</p>
<p><img loading="lazy" src="/static/pi.jpg" alt=""  />
</p>
<p>Notes:</p>
<ol>
<li>We can turn off our server every night further improving cost savings but I will leave that as an exercise for the reader</li>
<li>Your Pi will have hard time if you are expecting it to perform OCR while also transcoding media streams for multiple users. So yes your apps need to be configured properly to make the best out of this low cost setup.</li>
</ol>
]]></content:encoded>
    </item>
    <item>
      <title>Why Start Self Hosting</title>
      <link>https://rohanrd.xyz/posts/why-start-self-hosting/</link>
      <pubDate>Wed, 23 Mar 2022 00:02:34 +0530</pubDate>
      <guid>https://rohanrd.xyz/posts/why-start-self-hosting/</guid>
      <description>Take control back of your digital life</description>
      <content:encoded><![CDATA[<p>Remember Picasa? There is no native application even today that comes close to it&rsquo;s feature parity. But sadly it was discontinued in favour of a cloud application: Google Photos. What happened with Picasa also happened to millions of other applications around the same time Picasa was discontinued. The applications we use to run on our PC have moved to cloud. It makes sense from corporations perspective because they get more control over updates, user data and licenses but users are at huge disadavantage as they no longer are in control of their own data. You might ask why that is such an issue? Let&rsquo;s see:</p>
<p>Consider this, you carefully curate your playlists on Spotify but every now and then you see a certain song missing from your playlist. Same goes for videos saved in your YouTube playlists or other music/video streaming services. Then there is also the case of OTT streaming platforms where the show you were going to watch over weekend has now disappeared. If this was not bad imagine what happens when you need document from your email but the provider has suspended your account because of something you did (which was not even violation of terms of service) on other service of that email provider. <a href="https://hn.algolia.com/?q=account+suspended">Hacker News is littered with such stories</a>. There are some stories where the user never figured out what they had done wrong to deserve suspension of account.</p>
<p>Then there is this whole different problem of corporations tracking you and your data. Whenever I bring this up people are like &ldquo;I don&rsquo;t care, I have nothing to hide&rdquo;. But this is exactly similiar to saying &ldquo;I don&rsquo;t care about free speech because I have nothing to say&rdquo;. Would you give up your right to free speech because you have nothing to say? No. The same goes about right to privacy. The data you share is used to cater you personalized ads. That same data is also used to ensure that you spend maximum time with the particular service. There are millions of engineers across the world who are getting paid hefty sum to keep as many eyeballs as possible glued to service offered by their employers. This engineering talent is supposed to be solving world&rsquo;s problems but instead they are ensuring how everyone wastes their time. That&rsquo;s a whole different topic for another blog post.</p>
<p>What self hosting does is it protects you against all these issues and more. It gives you the peace of mind by keeping you in control of your data. You can choose if you never want your data to leave your premises or home. You can also choose to make your data available to you whenever or wherever you want it securely. In upcoming posts, we will explore self hosted applications and how they protect you and your data. But if you cannot wait, head over to <a href="https://www.reddit.com/r/selfhosted">r/selfhosted</a> or check out this <a href="https://github.com/awesome-selfhosted/awesome-selfhosted/blob/master/README.md">awesome self hosted list</a> to get started with your self hosting journey.</p>
<p>Subscribe to RSS feed to stay updated.</p>
]]></content:encoded>
    </item>
  </channel>
</rss>
